// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-docker-compose
{
	"name": "Existing Docker Compose (Extend)",

	// Update the 'dockerComposeFile' list if you have more compose files or use different names.
	// The .devcontainer/docker-compose.yml file contains any overrides you need/want to make.
	"dockerComposeFile": [
		"../docker-compose.yml"
	],

	// The 'service' property is the name of the service for the container that VS Code should
	// use. Update this value and .devcontainer/docker-compose.yml to the real service name.
	"service": "app",

	// The optional 'workspaceFolder' property is the path VS Code should open by default when
	// connected. This is typically a file mount in .devcontainer/docker-compose.yml
	"workspaceFolder": "/app",
	"features": {
		"ghcr.io/devcontainers/features/python:1": {}
	},

	"customizations": {
		"vscode": {
		  "context": "..",
		  "settings": {
			"python.pythonPath": "/usr/local/bin/python",
			"editor.formatOnSave": true,
			"editor.quickSuggestions": {
			  "comments": "on",
			  "strings": "on",
			  "other": "on"
			},
			"editor.acceptSuggestionOnEnter": "on",
			"editor.quickSuggestionsDelay": 10,
			"editor.wordBasedSuggestions": true,
			"editor.inlineSuggest.enabled": true,
			"[python]": {
			  "analysis.autoImportCompletions": true,
			  "analysis.typeCheckingMode": "basic",
			  "defaultInterpreterPath": "${containerWorkspaceFolder}/.venv/bin/python",
			  "editor.codeActionsOnSave": {
				"source.organizeImports": true
			  },
			  "formatting.blackPath": "/usr/local/bin/black",
			  "formatting.provider": "black",
			  "languageServer": "Pylance",
			  "linting.enabled": true,
			  "linting.flake8Enabled": true,
			  "linting.flake8Path": "/usr/local/bin/flake8",
			  "linting.mypyEnabled": true,
			  "linting.mypyPath": "/usr/local/bin/mypy",
			  "linting.pycodestylePath": "/usr/local/bin/pycodestyle",
			  "linting.pylintEnabled": true,
			  "linting.pylintPath": "/usr/local/bin/pylint",
			  "testing.unittestEnabled": false,
			  "testing.pytestEnabled": true,
			  "testing.pytestArgs": ["--exitfirst"]
			},
			"isort.args": ["--profile", "black"]
		  },
		  "extensions": [
			"davidanson.vscode-markdownlint",
			"mrmlnc.vscode-duplicate",
			"visualstudioexptteam.vscodeintellicode",
			"visualstudioexptteam.intellicode-api-usage-examples",
			"eamodio.gitlens",
			"wholroyd.jinja",
			"esbenp.prettier-vscode",
			"bradlc.vscode-tailwindcss",
			"alfredbirk.tailwind-documentation",
			"ms-azuretools.vscode-docker",
			// python
			"ms-python.python",
			"ms-python.vscode-pylance",
			"ms-python.isort",
			"ms-python.black-formatter",
		  ],
		}
	  },

	"postCreateCommand": "uv venv .venv && .venv/bin/python -m ensurepip && .venv/bin/python -m pip install --upgrade pip && pip install -r requirements.txt"

}
